<!DOCTYPE html>
<!--
Javascript jQuery Three.js 360VR test. With help from...
http://www.html5rocks.com/en/tutorials/device/orientation/

-->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="icon" type="image/png" href="./icon_vr.png" />
		<link rel="apple-touch-icon" href="./icon_vr.png">
		<title>Three.js 360VR Demo</title>
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<style>
		@media screen {
			html, body, div, span {
				margin: 0;
			  padding: 0;
			  border: 0;
			  outline: 0;
			  font-size: 100%;
			  vertical-align: baseline;
			}

			body {
				height: auto;
		  	-webkit-text-size-adjust:none;
		  	font-family:Helvetica, Arial, Verdana, sans-serif;
		  	padding:0px;
				overflow-x: hidden;
			}

		}
		</style>
		<script type="text/javascript">

		</script>
	</head>
	<body>
		<div class="main">
		  <h2>Device Orientation</h2>
		  <table>
		    <tr>
		      <td>Event Supported</td>
		      <td id="doEvent"></td>
		    </tr>
		    <tr>
		      <td>Tilt Left/Right [gamma]</td>
		      <td id="doTiltLR"></td>
		    </tr>
		    <tr>
		      <td>Tilt Front/Back [beta]</td>
		      <td id="doTiltFB"></td>
		    </tr>
		    <tr>
		      <td>Direction [alpha]</td>
		      <td id="doDirection"></td>
		    </tr>
		   </table>
		</div>

		<div class="container" style="perspective: 300;">
		  <img src="icon_vr.png" id="imgLogo" class="logo">
		</div>
	</body>
		<script type="text/javascript">

		function deviceOrientationHandler(tiltLR, tiltFB, dir) {
			document.getElementById("doTiltLR").innerHTML = Math.round(tiltLR);
			document.getElementById("doTiltFB").innerHTML = Math.round(tiltFB);
			document.getElementById("doDirection").innerHTML = Math.round(dir);

			// Apply the transform to the image
			var logo = document.getElementById("imgLogo");
			logo.style.webkitTransform =
			  "rotate("+ tiltLR +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";
			logo.style.MozTransform = "rotate("+ tiltLR +"deg)";
			logo.style.transform =
			  "rotate("+ tiltLR +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";
		}

		if (window.DeviceOrientationEvent) {
		  document.getElementById("doEvent").innerHTML = "DeviceOrientation";
		  // Listen for the deviceorientation event and handle the raw data
		  window.addEventListener('deviceorientation', function(eventData) {
		    // gamma is the left-to-right tilt in degrees, where right is positive
		    var tiltLR = eventData.gamma;
		    // beta is the front-to-back tilt in degrees, where front is positive
		    var tiltFB = eventData.beta;
		    // alpha is the compass direction the device is facing in degrees
		    var dir = eventData.alpha
		    // call our orientation event handler
		    deviceOrientationHandler(tiltLR, tiltFB, dir);
		  }, false);
		} else {
		  document.getElementById("doEvent").innerHTML = "Not supported."
		}

		</script>

</html>
